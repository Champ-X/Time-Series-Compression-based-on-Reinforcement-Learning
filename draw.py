import os
import matplotlib
matplotlib.use('TkAgg')
import matplotlib.pyplot as plt

def drawline(ratio,x):
    print(x)
    plt.plot(x, ratio['gorilla'], marker='o', label='Gorilla')
    plt.plot(x, ratio['s'], marker='o', label='Snappy')
    plt.plot(x, ratio['z'], marker='o', label='Zlib')
    plt.plot(x, ratio['b'], marker='o', label='Bz2')
    plt.plot(x, ratio['gz'], marker='o', label='Gzip')
    #plt.plot(x, ratio['influx'], marker='o', label='InfluxDB')
    plt.plot(x, ratio['my'], marker='*', label='My')

    plt.ylim(0,25)
    #plt.legend()  # 让图例生效
    plt.legend(bbox_to_anchor=(1.05, 0), loc=3, borderaxespad=0)
    plt.xticks(x, ['IoT0','IoT1','IoT2','IoT3','IoT4','IoT5','IoT6','IoT7'],rotation=45)
    plt.margins(0)
    plt.subplots_adjust(bottom=0.15)
    plt.xlabel(u"Datasets")  # X轴标签
    plt.ylabel("Compression ratio")  # Y轴标签
    plt.title("Timestamp Compression")  # 标题
    plt.show()

def drawtime(time,x):
    print(x)
    plt.plot(x, time['gorilla'], marker='o', label='Gorilla')
    plt.plot(x, time['s'], marker='o', label='Snappy')
    plt.plot(x, time['z'], marker='o', label='Zlib')
    plt.plot(x, time['b'], marker='o', label='Bz2')
    plt.plot(x, time['gz'], marker='o', label='Gzip')
    #plt.plot(x, time['influx'], marker='o', label='InfluxDB')
    plt.plot(x, time['my'], marker='*', label='My')

    plt.ylim(-0.1,1.1)
    #plt.legend()  # 让图例生效
    plt.legend(bbox_to_anchor=(1.05, 0), loc=3, borderaxespad=0)
    plt.xticks(x, ['IoT0', 'IoT1', 'IoT2', 'IoT3', 'IoT4', 'IoT5', 'IoT6', 'IoT7'], rotation=45)
    plt.margins(0)
    plt.subplots_adjust(bottom=0.15)
    plt.xlabel(u"Datasets")  # X轴标签
    plt.ylabel("Compression Time")  # Y轴标签
    plt.title("Timestamp Compression")  # 标题
    plt.show()

x = range(8)
#ratio={'gorilla': [1.22,1.88,1.01,0.69,1.59,1.42,0.71,0.41], 's': [0.74,1.05,0.77,0.95,1.31,1.54,0.79,0.73], 'z': [1.19,1.68,1.23,1.85,2.19,2.62,1.21,1.11], 'b': [1.66,3.00,1.81,1.70,3.15,3.33,1.53,1.38], 'gz': [1.21,1.95,1.27,1.87,2.51,2.63,1.25,1.14], 'my': [2.58,2.15,5.31,3.26,2.07,3.16,2.61,1.76],'influx': [1.81,2.70,2.23,2.31,2.78,2.09,1.81,1.43]}
#ratio ={'gorilla': [13.88,13.85,13.81,13.55,14.06,13.06,13.92,9.57], 's': [1.08,1.09,1.09,1.09,1.09,1.09,1.08,1.13], 'z': [1.59,1.59,1.62,1.60,1.60,1.60,1.59,1.65], 'b': [2.44,2.43,2.42,2.39,2.42,2.35,2.44,2.05], 'gz': [1.59,1.59,1.62,1.60,1.60,1.60,1.59,1.64], 'my': [20.58,20.42,20.33,20.06,20.77,19.59,20.51,14.49]}
#ratio ={'gorilla': [1.420496231058554, 0.4408277560046126, 0.4402511868776963, 0.7100373560135379, 0.41245362183154755, 1.087937608590031], 's': [1.5430166282764766, 0.7904766446830545, 0.8429641923154295, 0.7924195584969739, 0.7305796545105566, 0.9132468764249886], 'z': [2.623238530798914, 1.2139916188403446, 1.2764426280485097, 1.214433471239824, 1.110828352633545, 1.4530457545171196], 'b': [3.3357807502180865, 1.5238914573920352, 1.5425521308659207, 1.5266115841127375, 1.3837540716612378, 1.7796252564472583], 'gz': [2.625865522174535, 1.2425155952986533, 1.3001305702429125, 1.2455600041063546, 1.1353473166774046, 1.4948790094322724], 'my': [3.07, 1.07, 1.06, 1.05, 1.02, 1.25]}
#ratio = {'gorilla': [1.6482072699071262, 1.6405242655447652, 1.6450910538912975, 1.6390833263549303, 1.718282592801879, 1.6124346728272003], 's': [1.3750273840336884, 1.3592191064174703, 1.3376277726764578, 1.3151211882960239, 1.3673357505276458, 1.2681219286529843], 'z': [2.472116777909966, 2.3190784818866725, 2.311867647806948, 2.221962429598425, 2.356119103729198, 2.024875204714407], 'gz': [2.7341486237940047, 2.582390454409064, 2.6285738426868424, 2.52234702209362, 2.695189987739339, 2.3023044033811675],  'my': [2.08, 1.90, 1.97, 1.86, 2.01, 1.74]}
t={'gorilla': [0.83,0.90,0.85,0.71,0.61,0.82,0.76,0.83], 's': [0.07,0.06,0.06,0.07,0.07,0.05,0.07,0.08], 'z': [0.22,0.20,0.28,0.15,0.15,0.21,0.27,0.19], 'b': [0.61,0.61,0.46,0.45,0.37,0.38,0.46,0.42], 'gz': [0.60,0.66,0.47,0.54,0.44,0.50,0.55,0.53], 'my': [0.89,0.88,0.81,0.63,0.58,0.77,0.94,0.77]}
#t = {'gorilla': [1.21875, 1.140625, 1.109375, 1.140625, 1.125, 1.15625], 's': [0.09375, 0.109375, 0.078125, 0.109375, 0.109375, 0.09375], 'z': [0.328125, 0.328125, 0.359375, 0.359375, 0.296875, 0.359375], 'gz': [4.15625, 4.390625, 4.265625, 4.328125, 4.40625, 4.59375], 'my': [0.19, 0.27, 0.11, 0.19, 0.10, 0.65]}
#drawline(ratio,x)
drawtime(t,x)